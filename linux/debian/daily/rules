#!/usr/bin/make -f

export PYBUILD_NAME=kivy
export KIVY_NO_CONFIG=1
export TMP_INSTALL_DIR=$(CURDIR)/tmp-debian-install


%:
	dh $@ --with python3,sphinxdoc --buildsystem=pybuild

override_dh_auto_build:
	dh_auto_build
	mkdir -p $(TMP_INSTALL_DIR)
	dh_auto_install --destdir=$(TMP_INSTALL_DIR)
	cd doc && PYTHONPATH=$(TMP_INSTALL_DIR)/usr/lib/python3/dist-packages:$PYTHONPATH make html;
	rm -rf $(TMP_INSTALL_DIR)


override_dh_auto_test:
	#xvfb-run -s "+extension GLX" dh_auto_test
	echo "! TESTS ARE TEMPORARY DISABLED !"